<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
// an array of 2 data (we created a data )   

// assume this data lies in server 
//  let studentData = [
//      {
//          name: "shash",
//          batch : 11,
//      },
//      {
//          name : "shivu",
//          batch : 12,
//      }
//  ]


// // function to handle fetch behaviour
// const getStudentData = () => {
//     console.log("FETCHING STUDENT DATA........ ")
//     setTimeout( () => {
//         console.log("Data fetched success ")
//       console.log(studentData);
//     },4000)
// }


// getStudentData();




//// same thinfg if done using Promises:
let empData = [
     {
         name: "shash",
         batch : 11,
     },
     {
         name : "shivu",
         batch : 12,
     }
 ]



const getEmptData = () => {
    return new Promise((resolve , reject ) => {
        console.log("FETCHING STUDENT DATA........ ")
    
    setTimeout( () => {
        console.log("Data fetched success ")
       
       resolve(empData)
    },4000)
    })
    
}

getEmptData().then(function(empData) {
    console.log(empData);
});





//sirs code:
// Function to mock fetch behaviour

    // const fetchStudentDataFromServer = () => {
    //   return new Promise((resolve, reject) => {
    //     console.log('Fetching student data ...')
    //     setTimeout(() => {
    //       console.log('Data fetched successfully after 4 secs!')
    //       resolve([
    //         {
    //           name: 'Prajakta',
    //           batch: 'Batch 11',
    //         },
    //         {
    //           name: 'Pratik',
    //           batch: 'Batch 12',
    //         }
    //       ])
    //     }, 4000)
    //   })
    // }

    // fetchStudentDataFromServer().then(function (studentData) {
    //   return studentData.filter(student => {
    //     return student.batch === 'Batch 12'
    //   })
    // }).then(function (updatedStudentData) {
    //   console.log(updatedStudentData[0].name)
    // })

    // let promise = new Promise(function (resolve, reject) {
    //   resolve(' A ')
    // })

    // // Promise chaining
    // promise.then(function(resolvedMessage) {
    //   return resolvedMessage + ' B ' 
    // }).then(function(updatedMessage) {
    //   return updatedMessage + ' C '
    // }).then(function(updatedMessage2) {
    //   console.log(updatedMessage2)
    // })


    // Example using Promise
    let myPromise = new Promise(function(myResolve, myReject) {
  let req = new XMLHttpRequest();
  req.open('GET', "mycar.htm");
  req.onload = function() {
    if (req.status == 200) {
      myResolve(req.response);
    } else {
      myReject("File not Found");
    }
  };
  req.send();
});

myPromise.then(
  function(value) {myDisplayer(value);},
  function(error) {myDisplayer(error);}
);



//Example using Callback

function getFile(myCallback) {
  let req = new XMLHttpRequest();
  req.open('GET', "mycar.html");
  req.onload = function() {
    if (req.status == 200) {
      myCallback(req.responseText);
    } else {
      myCallback("Error: " + req.status);
    }
  }
  req.send();
}

getFile(myDisplayer);





    </script>
</body>
</html>